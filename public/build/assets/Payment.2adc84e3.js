import{_,c as d,a as m,b as t,t as n,w as b,h as u,d as g,F as y,f as h,o as c}from"./app.4060d334.js";import"./bootstrap.esm.c86673ca.js";const C={props:["data"],mounted(){this.includeStripe("js.stripe.com/v3",function(){this.initializeStripe()}.bind(this))},data(){return{form:this.$inertia.form({name:null,token:null}),formConfig:{onSuccess:()=>this.form.reset()},publishableKey:this.data.publishable_key,stripe:null,cardElement:null,isButtonDisabled:!0,loading:!1,errorText:null,stripeStyle:{base:{color:"#32325d",fontFamily:'"Nunito", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}},methods:{includeStripe(e,s){let i=document,l="script",o=i.createElement(l),a=i.getElementsByTagName(l)[0];o.src="//"+e,s&&o.addEventListener("load",function(r){s(null,r)},!1),a.parentNode.insertBefore(o,a)},initializeStripe(){let e=this;e.loading=!1,this.stripe=Stripe(this.publishableKey);var s=this.stripe.elements();this.cardElement=s.create("card",{hidePostalCode:!0,style:this.stripeStyle}),this.cardElement.mount("#card-element"),e.disableConfirmButton(),this.cardElement.on("change",function(i){i.complete?(e.errorText="",e.enableConfirmButton()):i.error?(e.errorText=i.error.message,e.disableConfirmButton()):(e.errorText="",e.enableConfirmButton())})},disableConfirmButton(){this.isButtonDisabled=!0},enableConfirmButton(){this.isButtonDisabled=!1},showError(e){this.showAlertMessage(e)},async onSubmit(){this.disableConfirmButton(),this.loading=!0;const{setupIntent:e,error:s}=await this.stripe.confirmCardSetup(this.data.client_secret,{payment_method:{card:this.cardElement,billing_details:{name:this.form.name}}});s?(this.enableConfirmButton(),this.loading=!1):(this.form.token=e.payment_method,this.$inertia.post(this.data.urls.submit_form,this.form))}}},B={class:"container page-container"},v={class:"row"},S={class:"col-md-6"},T={class:"col-md-6"},k={class:"mb-3"},E={class:"form-label",for:"card-element"},N=["placeholder"],w={class:"mb-3"},x={class:"form-label",for:"card-element"},P=t("div",{id:"card-element"},null,-1),D={key:0,class:"invalid-feedback d-block"},V=["disabled"],z=t("i",{class:"fas fa-shopping-cart"},null,-1),A={key:0,class:"text-center"};function F(e,s,i,l,o,a){const r=h("AppHead"),f=h("PageTitle");return c(),d(y,null,[m(r,{title:i.data.title},null,8,["title"]),t("div",B,[m(f,{title:i.data.title},null,8,["title"]),t("div",v,[t("div",S,[t("h5",null,n(i.data.subscription.title),1),t("div",null,n(e.formatMoney(i.data.subscription.price)),1)]),t("div",T,[t("form",{onSubmit:s[1]||(s[1]=b(()=>{},["prevent"]))},[t("div",k,[t("label",E,n(e.__("Name")),1),t("input",{id:"card-holder-name",class:"form-control",type:"text",placeholder:e.__("Name on the card")},null,8,N)]),t("div",w,[t("label",x,n(e.__("Credit Card")),1),P,o.errorText?(c(),d("div",D,n(o.errorText),1)):u("",!0)]),t("button",{type:"button",class:"btn btn-success btn-block",disabled:o.isButtonDisabled,onClick:s[0]||(s[0]=(...p)=>a.onSubmit&&a.onSubmit(...p))},[z,g(" "+n(e.__("Confirm Payment")),1)],8,V)],32),o.loading?(c(),d("div",A,n(e.__("Please wait "))+"...",1)):u("",!0)])])])],64)}const j=_(C,[["render",F]]);export{j as default};
