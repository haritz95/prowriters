import p from"./CheckoutLayout.816f06cb.js";import{_ as y,g as _,y as h,f,o as r,b as n,t as a,e as i,v as u,a1 as b,c as l,r as g,F as v,d as w,w as C,h as D}from"./app.4060d334.js";import"./bootstrap.esm.c86673ca.js";const k={props:["data"],components:{CheckoutLayout:p},data(){return{paymentAmount:this.data.total,paymentDescription:`Payment for Order #${this.data.order_id}`,selectedCurrency:this.data.selected_currency||"",cryptocurrencies:this.data.cryptocurrencies||[],isButtonDisabled:!1,loading:!1}},methods:{onSubmit(){this.isButtonDisabled=!0,this.loading=!0,axios.post(this.data.urls.nowpayments_process,{amount:this.paymentAmount,currency:this.selectedCurrency,order_id:this.data.order_id,order_description:this.paymentDescription}).then(e=>{console.log("Full Response:",e),e.data&&e.data.invoice_url?window.location.href=e.data.invoice_url:this.showError("Unexpected response format. Please try again.")}).catch(e=>{console.error("Error:",e);let t="Error processing payment. Please try again.";e.response&&(e.response.data&&typeof e.response.data=="string"?t=`Unexpected response format: ${e.response.status}`:t=`Error ${e.response.status}: ${e.response.statusText}`),this.showError(t)}).finally(()=>{this.isButtonDisabled=!1,this.loading=!1})},showError(e){alert(e)}}},B={class:"mb-3"},E={class:"form-label",for:"payment-amount"},x=["disabled"],P={class:"mb-3"},S={class:"form-label",for:"payment-description"},V=["disabled"],A={class:"mb-3"},U={class:"form-label",for:"crypto-currency"},L=["disabled"],M=["value"],F=["disabled"],N=n("i",{class:"fas fa-shopping-cart"},null,-1),T={key:0,class:"text-center"};function O(e,t,d,R,s,c){const m=f("CheckoutLayout");return r(),_(m,{data:d.data,title:e.__("Pay with")+" "+d.data.gateway_name,is_payment_gateway_page:!0},{default:h(()=>[n("form",{id:"payment-form",onSubmit:t[3]||(t[3]=C((...o)=>c.onSubmit&&c.onSubmit(...o),["prevent"]))},[n("div",B,[n("label",E,a(e.__("Amount")),1),i(n("input",{type:"number",class:"form-control",id:"payment-amount","onUpdate:modelValue":t[0]||(t[0]=o=>s.paymentAmount=o),disabled:s.loading},null,8,x),[[u,s.paymentAmount]])]),n("div",P,[n("label",S,a(e.__("Description")),1),i(n("input",{type:"text",class:"form-control",id:"payment-description","onUpdate:modelValue":t[1]||(t[1]=o=>s.paymentDescription=o),disabled:s.loading},null,8,V),[[u,s.paymentDescription]])]),n("div",A,[n("label",U,a(e.__("Choose Cryptocurrency")),1),i(n("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=o=>s.selectedCurrency=o),disabled:s.loading},[(r(!0),l(v,null,g(s.cryptocurrencies,o=>(r(),l("option",{key:o.currency,value:o.currency},a(o.name)+" ("+a(o.currency)+") ",9,M))),128))],8,L),[[b,s.selectedCurrency]])]),n("button",{type:"submit",class:"btn btn-success btn-block",disabled:s.isButtonDisabled},[N,w(" "+a(e.__("Confirm Payment")),1)],8,F)],32),s.loading?(r(),l("div",T,a(e.__("Please wait "))+"...",1)):D("",!0)]),_:1},8,["data","title"])}const G=y(k,[["render",O]]);export{G as default};
